<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>Home Assistant Google Drive Backup - Folder Picker</title>

    <link href="/static/css/icons.css?version={{ version }}" rel="stylesheet">
    <link href="/static/css/materialize.css?version={{ version }}" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="/static/css/static.css?version={{ version }}" type="text/css" rel="stylesheet" media="screen,projection" />
    <link id="theme" href="/static/css/theme.css?version={{ version }}" type="text/css" rel="stylesheet" media="screen,projection" />
    <link rel="icon" type="image/png" href="/static/images/favicon.png?version={{ version }}">
    <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
    <script src="/static/js/jquery.js?version={{ version }}"></script>
    <script src="/static/js/colpick.js?version={{ version }}"></script>
    <script src="/static/js/materialize.js?version={{ version }}"></script>
    <script type="text/javascript">
      var clientId = "{{ client_id }}";
      var appId = "{{ app_id }}";
    </script>
    <script type="text/javascript" src="/static/js/scripts.js?version={{ version }}"></script>
    <script type="text/javascript" src="/static/js/settings.js?version={{ version }}"></script>
    <script type="text/javascript">
      function doColors() {
        setColors(Color.parse(decodeURIComponent(getQueryParams("bg"))), Color.parse(decodeURIComponent(getQueryParams("ac"))));
      }
      $(document).ready(function() {
        doColors();
      });
    </script>
    <style>
  body {    
    display: flex;
    min-height: 100vh;
    flex-direction: column;
  }

  main {
    flex: 1 0 auto;
  }
    </style>    
  </head>
  <body>
  <header>
    <nav class="non-ingress ha-blue" role="navigation">
      <div class="nav-wrapper">
        <a class="brand-logo">
          <img style="vertical-align: middle;" src="/static/images/logo.png" width=40 height=40 />
          <span>Choose Backup Folder</span>
        </a>
      </div>
    </nav>
  </header>
  <main>
    <div class="container">
      <div class="section">
      <div class="row" id="hello_card">
          <div class="col s12 m9">
              <div class="card">
                  <div class="card-content">
                      <span class="card-title">Opening folder picker...</span>
                      <p>A window should be opening now asking you to log into your Google account and then to select a folder from your Google Drive.
                      <ul class="browser-default">
                        <li>If not, your popup blocker probably hates this page.  Click the button below to open the dialog.</li>
                        <li>After you select a folder you'll be redirected back to the addon.</li>
                        <li>If the folder you want to use doesn't exist yet, navigate to <a href="https://drive.google.com" target="_blank">Google Drive</a> and create it there first.  The folder picker doesn't let you create folders.</li>
                        <li>The folder you select is where the addon will store snapshots from now on.  This should be what you want.</li>
                        <li>If you'd like to know why this page has to be hosted on an external domain, <a target="_blank" href="https://github.com/sabeechen/hassio-google-drive-backup/blob/master/hassio-google-drive-backup/AUTHENTICATION.md">click here</a>.</li>
                      </ul>
                      </p>
                      <div class="card-action white-text">
                          <a target="_blank" class="waves-effect waves-light btn" onclick="loadPicker();">Choose Folder</a>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </div>
    </div>
  </main>
  
  {% include 'layouts/partials/footer.jinja2' %}
  </body>
</html>

