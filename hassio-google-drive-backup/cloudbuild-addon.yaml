steps:
  # Login to docker
- name: "gcr.io/cloud-builders/docker"
  entrypoint: "bash"
  args: ["-c", "docker login --username=sabeechen --password=${_DOCKERHUB_PASSWORD}"]
  
  # AMD64 Build
- name: 'gcr.io/cloud-builders/docker'
  args: [ 'build', '-f', 'Dockerfile-addon',  '-t', 'sabeechen/hassio-google-drive-backup-amd64:${_VERSION}', "--build-arg", "BUILD_FROM=homeassistant/amd64-base", '.' ]

  # ARMv7 build
- name: 'gcr.io/cloud-builders/docker'
  args: [ 'build', '-f', 'Dockerfile-addon',  '-t', 'sabeechen/hassio-google-drive-backup-armv7:${_VERSION}', "--build-arg", "BUILD_FROM=homeassistant/armv7-base", '.' ]

  # aarch64 build
- name: 'gcr.io/cloud-builders/docker'
  args: [ 'build', '-f', 'Dockerfile-addon',  '-t', 'sabeechen/hassio-google-drive-backup-aarch64:${_VERSION}', "--build-arg", "BUILD_FROM=homeassistant/aarch64-base", '.' ]

  # armhf build
- name: 'gcr.io/cloud-builders/docker'
  args: [ 'build', '-f', 'Dockerfile-addon',  '-t', 'sabeechen/hassio-google-drive-backup-armhf:${_VERSION}', "--build-arg", "BUILD_FROM=homeassistant/armhf-base", '.' ]

  # i386 build
- name: 'gcr.io/cloud-builders/docker'
  args: [ 'build', '-f', 'Dockerfile-addon',  '-t', 'sabeechen/hassio-google-drive-backup-i386:${_VERSION}', "--build-arg", "BUILD_FROM=homeassistant/i386-base", '.' ]

substitutions:
  _DOCKERHUB_PASSWORD: "define me" # default value
  _VERSION: "dev-testing" # default value
images:
  - "sabeechen/hassio-google-drive-backup-amd64:${_VERSION}"
  - "sabeechen/hassio-google-drive-backup-armv7:${_VERSION}"
  - "sabeechen/hassio-google-drive-backup-aarch64:${_VERSION}"
  - "sabeechen/hassio-google-drive-backup-armhf:${_VERSION}"
  - "sabeechen/hassio-google-drive-backup-i386:${_VERSION}"

    